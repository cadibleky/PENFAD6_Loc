

@using  PENFAD6DAL.Repository.Security
@using PENFAD6DAL.GlobalObject

@model IEnumerable<sec_User_Change_Password>

@{
    var x = Html.X();
}

@(

            x.Window()
            .ID("UserChangePasswordWindow")
            .Title("Change Password")
            .Width(480)
            .Height(300)
            .Modal(true)
            .AutoRender(false)
            .Collapsible(false)
            .OverflowY(Overflow.Auto)
            .OverflowX(Overflow.Auto)
            .Resizable(false)
            .Maximizable(false)
            
            .Items(
                    x.FormPanel()
                    .ID("UserChangePasswordFormPanel")
                     .WidthSpec("100%")
                     .Collapsible(false)
                     .Height(220)

                     .OverflowY(Overflow.Auto)
                     .OverflowX(Overflow.Auto)
                     .MarginSpec("0 0 0 0")

                     .Defaults(dd =>
                     {
                         dd.Add(new Parameter("LabelWidth", "150"));
                     })
                     .ButtonAlign(Alignment.Center)
                     .Buttons
                     (
                        x.Button()
                            .Text("Change")
                            .Width(120)
                            .ID("UserChangePasswordChangeBtn")
                            .Icon(Icon.UserKey)
                            .DirectEvents(de =>
                            {
                                de.Click.Url = Url.Action("ChangePassword", "Security/User");
                                de.Click.Confirmation.ConfirmRequest = true;
                                de.Click.Confirmation.Title = "Change Password";
                                de.Click.Confirmation.Message = "Are you sure you want to change your password?";
                                //de.Click.Success = Url.Action("Logout", "Security/User");
                            }).MarginSpec("0 20 0 0"),

                            x.Button()
                            .Text("Close")
                            .Width(120)
                            .MarginSpec("0 0 0 20")
                            .ID("UserChangePasswordCreditCloseBtn")
                            .Handler("App.UserChangePasswordWindow.hide()")
                            .Icon(Icon.ApplicationViewDetail)
                            .DirectEvents(de =>
                            {
                                de.Click.Timeout = 120000;
                            })
                     )
                     .Items(

                        x.TextField().Name("User_Id").FieldLabel("User").MarginSpec("15 10 5 20").Width(400).ReadOnly(true).Value(GlobalValue.User_ID).Hidden(true),
                        x.TextField().Name("Old_Password").FieldLabel("Old Password").MarginSpec("15 10 15 20").Width(400).InputType(Ext.Net.InputType.Password),
                        x.TextField().Name("New_Password").FieldLabel("New Password").MarginSpec("15 10 15 20").Width(400).InputType(Ext.Net.InputType.Password),
                        x.TextField().Name("Confirm_Password").FieldLabel("Confirm Password").MarginSpec("15 10 5 20").Width(400).InputType(Ext.Net.InputType.Password)
                        )




                            )



)
